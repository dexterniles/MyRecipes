<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrepSync - Professional Kitchen Recipe Manager</title>
    <link rel="stylesheet" href="styles.css?v=2025-10-24" onerror="console.error('CSS failed to load')">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-utensils"></i>
                <h1>PrepSync</h1>
                <span class="tagline">Professional Kitchen Manager</span>
            </div>
            
            <div class="header-actions">
                <div class="user-info" id="userInfo" style="display: none;">
                    <span class="welcome-text">Welcome, <span id="userName"></span></span>
                    <button id="logoutBtn" class="btn btn-outline">Logout</button>
                </div>
                <div class="auth-buttons" id="authButtons">
                    <button id="loginBtn" class="btn btn-primary">Login</button>
                    <button id="registerBtn" class="btn btn-outline">Register</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Recipe List View -->
        <section id="recipeListView" class="view active">
            <div class="view-header">
                <h2>Recipe Library</h2>
                <div class="view-actions">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchInput" placeholder="Search recipes...">
                    </div>
                    <button id="addRecipeBtn" class="btn btn-primary">
                        <i class="fas fa-plus"></i>
                        Add Recipe
                    </button>
                </div>
            </div>
            
            <div class="recipe-grid" id="recipeGrid">
                <!-- Recipes will be loaded here -->
            </div>
        </section>

        <!-- Add Recipe View -->
        <section id="addRecipeView" class="view">
            <div class="view-header">
                <h2>Add New Recipe</h2>
            </div>
            
            <form id="addRecipeForm" class="recipe-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="recipeName">Recipe Name *</label>
                        <input type="text" id="recipeName" name="name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="recipeCategory">Category</label>
                        <select id="recipeCategory" name="category">
                            <option value="">Select Category</option>
                            <option value="appetizers">Appetizers</option>
                            <option value="soups">Soups</option>
                            <option value="salads">Salads</option>
                            <option value="mains">Main Courses</option>
                            <option value="desserts">Desserts</option>
                            <option value="beverages">Beverages</option>
                            <option value="sauces">Sauces</option>
                            <option value="sides">Side Dishes</option>
                            <option value="garnishes">Garnishes</option>
                            <option value="condiments">Condiments</option>
                            <option value="dressings">Dressings</option>
                            <option value="marinades">Marinades</option>
                            <option value="rubs">Spice Rubs</option>
                            <option value="stocks">Stocks & Broths</option>
                            <option value="preserves">Preserves & Pickles</option>
                            <option value="breads">Breads & Pastries</option>
                            <option value="breakfast">Breakfast</option>
                            <option value="snacks">Snacks</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="prepTime">Prep Time (minutes)</label>
                        <input type="number" id="prepTime" name="prep_time" min="0" max="1440">
                    </div>
                    
                    <div class="form-group">
                        <label for="cookTime">Cook Time (minutes)</label>
                        <input type="number" id="cookTime" name="cook_time" min="0" max="1440">
                    </div>
                    
                    <div class="form-group">
                        <label for="servings">Servings</label>
                        <input type="number" id="servings" name="servings" min="1" max="100">
                    </div>
                    
                    <div class="form-group">
                        <label for="difficulty">Difficulty</label>
                        <select id="difficulty" name="difficulty">
                            <option value="">Select Difficulty</option>
                            <option value="Easy">Easy</option>
                            <option value="Medium">Medium</option>
                            <option value="Hard">Hard</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea id="description" name="description" rows="3" placeholder="Brief description of the recipe..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="ingredients">Ingredients *</label>
                    <div class="ingredients-input">
                        <div class="ingredient-item">
                            <input type="text" class="ingredient-input" placeholder="e.g., 2 cups flour">
                            <button type="button" class="btn-remove-ingredient" onclick="removeIngredient(this)">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <button type="button" id="addIngredientBtn" class="btn btn-outline btn-sm">
                        <i class="fas fa-plus"></i>
                        Add Ingredient
                    </button>
                </div>
                
                <div class="form-group">
                    <label for="instructions">Instructions *</label>
                    <div class="instructions-input">
                        <div class="instruction-item">
                            <span class="step-number">1</span>
                            <textarea class="instruction-text" placeholder="Describe the cooking step..."></textarea>
                            <button type="button" class="btn-remove-instruction" onclick="removeInstruction(this)">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <button type="button" id="addInstructionBtn" class="btn btn-outline btn-sm">
                        <i class="fas fa-plus"></i>
                        Add Step
                    </button>
                </div>
                
                <div class="form-group">
                    <label for="notes">Chef Notes</label>
                    <textarea id="notes" name="notes" rows="3" placeholder="Additional notes, tips, or variations..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="imageUrl">Image URL</label>
                    <input type="url" id="imageUrl" name="image_url" placeholder="https://example.com/image.jpg">
                </div>
                
                <div class="form-actions">
                    <button type="button" id="cancelAddBtnBottom" class="btn btn-outline btn-lg">
                        <i class="fas fa-times"></i>
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary btn-lg">
                        <i class="fas fa-save"></i>
                        Save Recipe
                    </button>
                </div>
            </form>
        </section>

        <!-- Edit Recipe View -->
        <section id="editRecipeView" class="view">
            <div class="view-header">
                <h2>Edit Recipe</h2>
            </div>
            
            <form id="editRecipeForm" class="recipe-form">
                <input type="hidden" id="editRecipeId">
                <!-- Same form structure as add recipe -->
                <div class="form-grid">
                    <div class="form-group">
                        <label for="editRecipeName">Recipe Name *</label>
                        <input type="text" id="editRecipeName" name="name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="editRecipeCategory">Category</label>
                        <select id="editRecipeCategory" name="category">
                            <option value="">Select Category</option>
                            <option value="appetizers">Appetizers</option>
                            <option value="soups">Soups</option>
                            <option value="salads">Salads</option>
                            <option value="mains">Main Courses</option>
                            <option value="desserts">Desserts</option>
                            <option value="beverages">Beverages</option>
                            <option value="sauces">Sauces</option>
                            <option value="sides">Side Dishes</option>
                            <option value="garnishes">Garnishes</option>
                            <option value="condiments">Condiments</option>
                            <option value="dressings">Dressings</option>
                            <option value="marinades">Marinades</option>
                            <option value="rubs">Spice Rubs</option>
                            <option value="stocks">Stocks & Broths</option>
                            <option value="preserves">Preserves & Pickles</option>
                            <option value="breads">Breads & Pastries</option>
                            <option value="breakfast">Breakfast</option>
                            <option value="snacks">Snacks</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="editPrepTime">Prep Time (minutes)</label>
                        <input type="number" id="editPrepTime" name="prep_time" min="0" max="1440">
                    </div>
                    
                    <div class="form-group">
                        <label for="editCookTime">Cook Time (minutes)</label>
                        <input type="number" id="editCookTime" name="cook_time" min="0" max="izens:1440">
                    </div>
                    
                    <div class="form-group">
                        <label for="editServings">Servings</label>
                        <input type="number" id="editServings" name="servings" min="1" max="100">
                    </div>
                    
                    <div class="form-group">
                        <label for="editDifficulty">Difficulty</label>
                        <select id="editDifficulty" name="difficulty">
                            <option value="">Select Difficulty</option>
                            <option value="Easy">Easy</option>
                            <option value="Medium">Medium</option>
                            <option value="Hard">Hard</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="editDescription">Description</label>
                    <textarea id="editDescription" name="description" rows="3"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="editIngredients">Ingredients *</label>
                    <div class="ingredients-input" id="editIngredientsContainer">
                        <!-- Dynamic ingredients will be added here -->
                    </div>
                    <button type="button" id="editAddIngredientBtn" class="btn btn-outline btn-sm">
                        <i class="fas fa-plus"></i>
                        Add Ingredient
                    </button>
                </div>
                
                <div class="form-group">
                    <label for="editInstructions">Instructions *</label>
                    <div class="instructions-input" id="editInstructionsContainer">
                        <!-- Dynamic instructions will be added here -->
                    </div>
                    <button type="button" id="editAddInstructionBtn" class="btn btn-outline btn-sm">
                        <i class="fas fa-plus"></i>
                        Add Step
                    </button>
                </div>
                
                <div class="form-group">
                    <label for="editNotes">Chef Notes</label>
                    <textarea id="editNotes" name="notes" rows="3"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="editImageUrl">Image URL</label>
                    <input type="url" id="editImageUrl" name="image_url">
                </div>
                
                <div class="form-actions">
                    <button type="button" id="cancelEditBtnBottom" class="btn btn-outline btn-lg">
                        <i class="fas fa-times"></i>
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary btn-lg">
                        <i class="fas fa-save"></i>
                        Update Recipe
                    </button>
                </div>
            </form>
        </section>

        <!-- Recipe Detail Modal -->
        <div id="recipeModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modalRecipeName"></h3>
                    <button id="closeModalBtn" class="btn-close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="recipe-detail">
                        <div class="recipe-meta">
                            <div class="meta-item">
                                <i class="fas fa-clock"></i>
                                <span>Prep: <span id="modalPrepTime"></span> min</span>
                            </div>
                            <div class="meta-item">
                                <i class="fas fa-fire"></i>
                                <span>Cook: <span id="modalCookTime"></span> min</span>
                            </div>
                            <div class="meta-item">
                                <i class="fas fa-users"></i>
                                <span><span id="modalServings"></span> servings</span>
                            </div>
                            <div class="meta-item">
                                <i class="fas fa-signal"></i>
                                <span id="modalDifficulty"></span>
                            </div>
                        </div>
                        
                        <div class="recipe-description">
                            <p id="modalDescription"></p>
                        </div>
                        
                        <div class="recipe-ingredients">
                            <h4>Ingredients</h4>
                            <ul id="modalIngredients"></ul>
                        </div>
                        
                        <div class="recipe-instructions">
                            <h4>Instructions</h4>
                            <ol id="modalInstructions"></ol>
                        </div>
                        
                        <div class="recipe-notes" id="modalNotesContainer" style="display: none;">
                            <h4>Chef Notes</h4>
                            <p id="modalNotes"></p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="editRecipeBtn" class="btn btn-primary">
                        <i class="fas fa-edit"></i>
                        Edit Recipe
                    </button>
                    <button id="deleteRecipeBtn" class="btn btn-danger">
                        <i class="fas fa-trash"></i>
                        Delete Recipe
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Authentication Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content auth-modal-content">
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">Login</button>
                <button class="auth-tab" data-tab="register">Register</button>
            </div>
            
            <!-- Login Form -->
            <form id="loginForm" class="auth-form active">
                <h3>Login to PrepSync</h3>
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" name="email" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" name="password" required>
                </div>
                <button type="submit" class="btn btn-primary btn-lg">Login</button>
            </form>
            
            <!-- Register Form -->
            <form id="registerForm" class="auth-form">
                <h3>Create Account</h3>
                <div class="form-group">
                    <label for="registerUsername">Username</label>
                    <input type="text" id="registerUsername" name="username" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" name="email" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Password</label>
                    <input type="password" id="registerPassword" name="password" required>
                </div>
                <button type="submit" class="btn btn-primary btn-lg">Register</button>
            </form>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Loading...</p>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="script.js"></script>
</body>
</html>
